From 45b1699b7c55800b17c2d5d8d1d156d3f4580a0c Mon Sep 17 00:00:00 2001
From: Mat Booth <mat.booth@gmail.com>
Date: Wed, 12 Nov 2025 21:49:25 +0000
Subject: [PATCH 1/2] fix deprecated API usage

---
 aiocache/backends/redis.py      | 2 +-
 tests/ut/backends/test_redis.py | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/aiocache/backends/redis.py b/aiocache/backends/redis.py
index d0e3bd6..e001fde 100644
--- a/aiocache/backends/redis.py
+++ b/aiocache/backends/redis.py
@@ -188,7 +188,7 @@ class RedisBackend(BaseCache):
         return await self._raw("eval", self.RELEASE_SCRIPT, 1, key, value)
 
     async def _close(self, *args, _conn=None, **kwargs):
-        await self.client.close()
+        await self.client.aclose()
 
 
 class RedisCache(RedisBackend):
diff --git a/tests/ut/backends/test_redis.py b/tests/ut/backends/test_redis.py
index a26e408..2837cbc 100644
--- a/tests/ut/backends/test_redis.py
+++ b/tests/ut/backends/test_redis.py
@@ -233,7 +233,7 @@ class TestRedisBackend:
 
     async def test_close(self, redis):
         await redis._close()
-        assert redis.client.close.call_count == 1
+        assert redis.client.aclose.call_count == 1
 
 
 class TestRedisCache:
-- 
2.51.1

